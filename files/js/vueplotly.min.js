const eventsName=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","Transitioning","TransitionInterrupted","Unhover"],events=eventsName.map((e=>e.toLocaleLowerCase())).map((e=>({completeName:"plotly_"+e,handler:t=>(...i)=>{t.$emit.apply(t,[e,...i])}}))),plotlyFunctions=["restyle","relayout","update","addTraces","deleteTraces","moveTraces","extendTraces","prependTraces","purge"];function cached(e){const t=Object.create(null);return function(i){return t[i]||(t[i]=e(i))}}const regex=/-(\w)/g,methods=plotlyFunctions.reduce(((e,t)=>(e[t]=function(...e){return Plotly[t].apply(Plotly,[this.$el,...e])},e)),{}),camelize=cached((e=>e.replace(regex,((e,t)=>t?t.toUpperCase():"")))),directives={};"undefined"!=typeof window&&(directives.resize=Vueresize),Vue.component("plotly",{template:'<div :id="id" v-resize:debounce.100="onResize" ></div>',inheritAttrs:!1,directives:directives,props:{data:{type:Array},layout:{type:Object},id:{type:String,required:!1,default:null}},data(){return{scheduled:null,innerLayout:{...this.layout}}},mounted(){Plotly.newPlot(this.$el,this.data,this.innerLayout,this.options),events.forEach((e=>{this.$el.on(e.completeName,e.handler(this))}))},watch:{data:{handler(){this.schedule({replot:!0})},deep:!0},options:{handler(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.schedule({replot:!0})},deep:!0},layout(e){this.innerLayout={...e},this.schedule({replot:!1})}},computed:{options(){return{responsive:!1,...Object.keys(this.$attrs).reduce(((e,t)=>(e[camelize(t)]=this.$attrs[t],e)),{})}}},beforeDestroy(){events.forEach((e=>this.$el.removeAllListeners(e.completeName))),Plotly.purge(this.$el)},methods:{...methods,onResize(){Plotly.Plots.resize(this.$el)},schedule(e){const{scheduled:t}=this;t?t.replot=t.replot||e.replot:(this.scheduled=e,this.$nextTick((()=>{const{scheduled:{replot:e}}=this;this.scheduled=null,e?this.react():this.relayout(this.innerLayout)})))},toImage(e){const t=Object.assign(this.getPrintOptions(),e);return Plotly.toImage(this.$el,t)},downloadImage(e){const t=`plot--${(new Date).toISOString()}`,i=Object.assign(this.getPrintOptions(),{filename:t},e);return Plotly.downloadImage(this.$el,i)},getPrintOptions(){const{$el:e}=this;return{format:"png",width:e.clientWidth,height:e.clientHeight}},react(){Plotly.react(this.$el,this.data,this.innerLayout,this.options)}}});